!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const o={penSize:16,frames:[],activeFrame:0,mainCanvas:{context:null,isMouseDown:!1},color:null,activeTool:"pensil"};document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("myCanvas"),t=document.getElementById("frames");function n(e){const a=document.createElement("div");a.classList.add("canvas-item"),a.addEventListener("click",()=>{o.activeFrame=e,Array.from(document.getElementsByClassName("canvas-item")).forEach(e=>e.classList.remove("canvas-item-selected")),a.classList.add("canvas-item-selected"),c(o.mainCanvas.context,o.frames[e].points),c(o.frames[e].canvasContext,o.frames[e].points)});const r=document.createElement("canvas");r.width=96,r.height=96;const s=r.getContext("2d");s.scale(.14,.14),a.appendChild(r);const i=document.createElement("button");i.innerText=" ",i.className="del-btn",i.style.backgroundImage="url('src/pictures/trash-alt-solid.svg')",i.addEventListener("click",t=>{t.stopPropagation(),1!==o.frames.length&&(o.frames.splice(e,1),o.activeFrame===e&&(o.activeFrame=0,o.frames[o.activeFrame].container.click()),a.remove())});const l=document.createElement("button");return l.innerText=" ",l.className="dupl-frame-btn",l.style.backgroundImage="url('src/pictures/copy-regular.svg')",l.addEventListener("click",t=>{t.stopPropagation();const a=o.frames.length;o.frames.push(n(a)),o.frames[a].points=[...o.frames[e].points],o.frames[a].container.click()}),a.appendChild(i),a.appendChild(l),t.appendChild(a),{points:[],canvasContext:s,container:a}}function a(e,t){let n=0,o=0,a=t;if(void 0!==a.offsetParent)do{n+=a.offsetLeft,o+=a.offsetTop,a=a.offsetParent}while(a);const c=e.pageX-n,r=e.pageY-o;return document.getElementById("cursor-coordinates").innerHTML=`<p>${`${c} : ${r}`}<p>`,[c,r]}function c(e,t){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.lineJoin="round";for(let n=0;n<t.length;n+=1){const o=t[n-1],a=t[n];e.lineWidth=a.penSize,e.beginPath(),a.draw&&o?e.moveTo(o.x,o.y):e.moveTo(a.x-1,a.y),e.lineTo(a.x,a.y),e.closePath(),e.strokeStyle=a.color,e.stroke()}}o.mainCanvas.context=document.getElementById("myCanvas").getContext("2d"),o.color=document.querySelector("#chosen_color").value,o.frames=[n(0)],Array.from(document.getElementsByClassName("canvas-item")).forEach(e=>e.classList.add("canvas-item-selected")),Array.from(document.getElementsByClassName("pen-size-tool")).forEach(e=>{e.addEventListener("click",e=>{o.penSize=parseInt(e.target.dataset.size,10)})}),document.querySelector("#chosen_color").addEventListener("input",function(e){o.color=e.target.value},!1),document.getElementById("add-frame-btn").addEventListener("click",()=>{o.frames.push(n(o.frames.length))}),e.onmousedown=t=>{o.mainCanvas.isMouseDown=!0;const[n,c]=a(t,e);o.frames[o.activeFrame].points.push({x:n,y:c,penSize:o.penSize,color:o.color,draw:!0})},e.addEventListener("mouseup",t=>{o.mainCanvas.isMouseDown=!1;const[n,c]=a(t,e);o.frames[o.activeFrame].points.push({x:n,y:c,penSize:o.penSize,color:o.color,draw:!1})}),e.addEventListener("mousemove",t=>{if(o.mainCanvas.isMouseDown){const[n,r]=a(t,e),s={x:n,y:r,penSize:o.penSize,color:o.color,draw:!0};"eraser"===o.activeTool&&(s.color="#FFF"),o.frames[o.activeFrame].points.push(s),c(o.mainCanvas.context,o.frames[o.activeFrame].points),c(o.frames[o.activeFrame].canvasContext,o.frames[o.activeFrame].points)}}),document.getElementById("canvas-size").innerHTML=`<p>${`${e.width} : ${e.height}`}<p>`});const a={pensil:80,eraser:69};document.addEventListener("keydown",e=>{Object.entries(a).forEach(([t,n])=>{e.keyCode===n&&document.querySelector(`button[data-tool=${t}]`).click()})});const c=document.getElementById("myModal"),r=document.getElementById("myBtn"),s=document.getElementsByClassName("close-key")[0];r.onclick=function(){c.style.display="block"},s.onclick=function(){c.style.display="none"},window.onclick=function(e){e.target===c&&(c.style.display="none")};const i=document.getElementById("pensil"),l=document.getElementById("chosen_color").value;window.state={currentTool:""},i.addEventListener("click",()=>{window.state.currentTool="pensil",i.classList.add("highlight-color-picker"),i.value=l});const d=document.getElementById("color_picker");window.state={currentTool:""},d.addEventListener("click",()=>{window.state.currentTool="colorPicker",d.classList.add("highlight-color-picker")});const m=document.getElementById("eraser");window.state={currentTool:""},m.addEventListener("click",()=>{window.state.currentTool="eraser",m.classList.add("highlight-color-picker"),m.value="#FF8040"});const u=document.getElementById("bucket");window.state={currentTool:""},u.addEventListener("click",()=>{window.state.currentTool="bucket",u.classList.add("highlight-color-picker")});const f=Array.from(document.getElementsByClassName("tools-button"));Array.from(f).forEach(e=>{e.addEventListener("click",()=>{f.forEach(e=>{e.classList.remove("tools-button-active")}),e.classList.add("tools-button-active"),o.activeTool=e.dataset.tool})})}]);
//# sourceMappingURL=app.bundle.js.map